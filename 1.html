<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
    </style>
</head>

<body>
    <canvas id="canvas" width="300" height="300"></canvas>
    <script>
        let width = 500
        let height = 500
        let canvas = document.querySelector('#canvas')
        canvas.width = width
        canvas.height = height
        let ctx = canvas.getContext('2d')
        let x = 150
        let y = 150
        let arr = []
        for (let i = 0; i < 60; i++) {
            arr.push({
                x: Math.floor(Math.random() * width),
                y: Math.floor(Math.random() * height),
                r: 3,
                dx: Math.round((Math.random() - 0.5) * 4),
                dy: Math.round((Math.random() - 0.5) * 4),
            })
        }
        ctx.strokeStyle = "#000"
        ctx.lineWidth = 1
        let mouseX = -100
        let mouseY = -100
        canvas.addEventListener('mousemove', function(e) {
            mouseX = e.offsetX
            mouseY = e.offsetY
        })
        function animate() {
            ctx.clearRect(0, 0, width, height)
            for (let i in arr) {
                let m = arr[i]
                m.x += m.dx
                m.y += m.dy
                if (m.r < 1) {
                    m.r = 1
                }
                if (m.x < 0 || m.x > width) {
                    m.dx = -m.dx
                }
                if (m.y < 0 || m.y > height) {
                    m.dy = -m.dy
                }
                ctx.beginPath()
                ctx.arc(m.x, m.y, m.r, 0, Math.PI * 2)
                ctx.stroke()
                ctx.fill()
                for (let j in arr) {
                    let n = arr[j]
                    let d = (m.x - n.x) ** 2 + (m.y - n.y) ** 2
                    if (d < 2500) {
                        ctx.lineWidth = Math.ceil((2500 - d) / 1000)
                        ctx.beginPath()
                        ctx.moveTo(m.x, m.y)
                        ctx.lineTo(n.x, n.y)
                        ctx.stroke()
                    }
                    let d2 = (m.x - mouseX) ** 2 + (m.y - mouseY) ** 2
                    if (d2 < 2500) {
                        ctx.lineWidth = Math.ceil((2500 - d2) / 1000)
                        ctx.beginPath()
                        ctx.moveTo(m.x, m.y)
                        ctx.lineTo(mouseX, mouseY)
                        ctx.stroke()
                    }
                }
            }
            requestAnimationFrame(animate)
        }
        animate()
    </script>
</body>

</html>